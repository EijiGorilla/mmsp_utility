"use strict";(self.webpackChunkmmsp_utility=self.webpackChunkmmsp_utility||[]).push([[1837],{11837:(n,t,e)=>{e.d(t,{convertMeshVertexSpace:()=>a});var r=e(10064),o=e(84652),l=e(66978),i=e(27474),u=e(66149);async function a(n,t,e){await Promise.resolve(),(0,l.k_)(e);const a=(0,u.qk)(n,t);if(!a)throw new r.Z("meshUtils:convertVertexSpace()","Failed to convert to provided vertex space due to projection errors");const s=n.cloneAndModifyVertexAttributes(new i.Q({...a,uv:(0,o.d9)(n.vertexAttributes.uv),color:(0,o.d9)(n.vertexAttributes.color)}),t);return s.transform=null,s}},66149:(n,t,e)=>{e.d(t,{qk:()=>x,ur:()=>U,x1:()=>w});var r=e(32718),o=e(16889),l=e(68860),i=e(29303),u=e(21389),a=e(29134),s=e(7025),c=e(32035),f=e(12400),p=e(29691),v=e(37998),g=e(68859),d=e(69048),m=e(11186),A=e(11700);const S=()=>r.Z.getLogger("esri.geometry.support.meshUtils.vertexSpaceConversion");function w(n,t,e){let{vertexSpace:r,spatialReference:o}=e;if("georeferenced"===r.type){const e=n;if(!(0,g.K)(t,e,o))return!1;const{origin:l}=r;return(0,c.f)(n,e,l),!0}const l=(0,p.rS)(o),i=n;if(!(0,g.K)(t,i,l))return!1;const{origin:u}=r,s=k;if(!(0,v.B)(o,u,s,l))return!1;const f=(0,a.U_)(k,s);return null!=f&&((0,c.h)(n,i,f),!0)}function x(n,t,e){const{vertexSpace:r,transform:l,vertexAttributes:u}=n,f=R(n.spatialReference,e,O.SOURCE|O.TARGET);if((0,d.vI)(r,t)&&(!l||(0,a.I6)(l.localMatrix,s.Wd))&&(0,o.Po)(f,1)){const{position:n,normal:t,tangent:r}=u,o=null===e||void 0===e?void 0:e.allowBufferReuse;return{position:o?n:n.slice(),normal:o?t:null===t||void 0===t?void 0:t.slice(),tangent:o?r:null===r||void 0===r?void 0:r.slice()}}switch(n.vertexSpace.type){case"local":return"local"===t.type?function(n,t,e,r){let{vertexAttributes:o,spatialReference:l,transform:i}=n,{origin:u}=t;const s=(0,p.rS)(l);if(!(0,v.B)(l,u,b,s))return(0,A.pn)(S(),l,s),null;if(i&&(0,a.Jp)(b,b,i.localMatrix),!(0,v.B)(l,e,E,s))return(0,A.pn)(S(),s,l),null;(0,a.U_)(E,E);const c=(0,a.Jp)(b,E,b);return y(c,l,r,O.SOURCE|O.TARGET),h(o,c)}(n,n.vertexSpace,t.origin,e):function(n,t,e,r){let{spatialReference:o,vertexAttributes:l,transform:i}=n,{origin:u}=t;const s=(0,p.rS)(o);if(!(0,v.B)(o,u,b,s))return(0,A.pn)(S(),o,s),null;i&&(0,a.Jp)(b,b,i.localMatrix),y(b,o,r,O.SOURCE);const f=new Float64Array(l.position.length),g=function(n,t,e,r){(0,m.a)(r,n,t);const o=new Float64Array(n.length);return(0,A.To)(r,o,e)?o:((0,A.pn)(S(),(0,p.rS)(e),e),null)}(l.position,b,o,f);if(!g)return null;const d=function(n,t,e,r,o){if(null==e)return null;const l=new Float32Array(e.length);return(0,A.w9)(e,l,r),(0,A.Yk)(l,n,t,o,l)?l:((0,A.pn)(S(),(0,p.rS)(o),o),null)}(g,f,l.normal,b,o);if(l.normal&&!d)return null;const w=function(n,t,e,r,o){if(null==e)return null;const l=new Float32Array(e.length);return(0,A.VS)(e,l,r),(0,A.M2)(l,n,t,o,l)?l:((0,A.pn)(S(),(0,p.rS)(o),o),null)}(g,f,l.tangent,b,o);if(l.tangent&&!w)return null;if(e){const n=(0,c.k)(T,e);(0,m.b)(g,g,n)}return{position:g,normal:d,tangent:w}}(n,n.vertexSpace,t.origin,e);case"georeferenced":return"local"===t.type?function(n,t,e,r){let{vertexAttributes:o,spatialReference:l,transform:u}=n,{origin:s}=t;const c=(0,p.rS)(l);if(!(0,v.B)(l,e,b,c))return(0,A.pn)(S(),l,c),null;const f=1/R(l,r,O.TARGET);(0,a.bA)(b,b,[f,f,f]);const g=(0,a.U_)(E,b),{position:d,normal:w,tangent:x}=function(n,t,e){if(!t)return n;if(!e){const{position:e,normal:r,tangent:o}=n;return{position:(0,m.b)(new Float64Array(e.length),e,t),tangent:o,normal:r}}const r=h(n,e.localMatrix);return(0,m.b)(r.position,r.position,t),r}(o,s,u),y=new Float64Array(d.length),U=function(n,t,e,r){const o=(0,A.XO)(n,t,r);if(!o)return(0,A.pn)(S(),t,(0,p.rS)(t)),null;const l=new Float64Array(o.length);return(0,m.a)(l,o,e),l}(d,l,g,y);if(!U)return null;const T=(0,i.XL)(F,g),k=function(n,t,e,r,o,l){if(null==n)return null;const i=null!==l&&void 0!==l?l:new Float32Array(n.length);return(0,A.Iz)(n,t,e,r,i)?((0,m.t)(i,i,o),i):((0,A.pn)(S(),r,(0,p.rS)(r)),null)}(w,d,y,l,T,w!==o.normal?w:void 0);if(!k&&w)return null;const C=function(n,t,e,r,o,l){if(null==n)return null;const i=null!==l&&void 0!==l?l:new Float32Array(n.length);return(0,A.wi)(n,t,e,r,i)?((0,m.t)(i,i,o,4),i):((0,A.pn)(S(),r,(0,p.rS)(r)),null)}(x,d,y,l,T,x!==o.tangent?x:void 0);return!C&&x?null:{position:U,normal:k,tangent:C}}(n,n.vertexSpace,t.origin,e):function(n,t,e,r){let{vertexAttributes:o,transform:l,spatialReference:i}=n,{origin:u}=t;const{position:a,normal:s,tangent:f}=l?h(o,l.localMatrix):o,p=new Float64Array(a.length);let v=a;if(u&&(v=(0,m.b)(p,v,u)),e){const n=(0,c.k)(T,e);v=(0,m.b)(p,v,n)}R(i,r,O.NONE);const g=null===r||void 0===r?void 0:r.allowBufferReuse;return{position:v!==o.position||g?v:v.slice(),normal:s!==o.normal||g?s:null===s||void 0===s?void 0:s.slice(),tangent:f!==o.tangent||g?f:null===f||void 0===f?void 0:f.slice()}}(n,n.vertexSpace,t.origin,e)}}function h(n,t){const e=new Float64Array(n.position.length);(0,m.a)(e,n.position,t);const r=n.normal?new Float32Array(n.normal.length):null,o=n.tangent?new Float32Array(n.tangent.length):null;return r&&n.normal&&(0,A.w9)(n.normal,r,t),o&&n.tangent&&(0,A.VS)(n.tangent,o,t),{position:e,normal:r,tangent:o}}function y(n,t,e,r){const o=R(t,e,r);1!==o&&(0,a.bA)(n,n,[o,o,o])}function R(n,t,e){const r=!!(e&O.SOURCE),o=!!(e&O.TARGET),l=null===t||void 0===t?void 0:t.sourceUnit,i=null===t||void 0===t?void 0:t.targetUnit;if(!l&&!i)return 1;let u=U(l,n);!r&&l&&1!==u&&(S().warn("source unit conversion not supported"),u=1);let a=1/U(i,n);return!o&&i&&1!==a&&(S().warn("target unit conversion not supported"),a=1),u*a}function U(n,t){if(null==n)return 1;const e=(0,l.r6)(t);return 1/(0,l.En)(e,"meters",n)}const b=(0,s.Ue)(),E=(0,s.Ue)(),F=(0,u.Ue)(),T=(0,f.Ue)(),k=(0,s.Ue)();var O,C;(C=O||(O={}))[C.NONE=0]="NONE",C[C.SOURCE=1]="SOURCE",C[C.TARGET=2]="TARGET"}}]);
//# sourceMappingURL=1837.f69a3d47.chunk.js.map